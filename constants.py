# constants.py
import pandas as pd

# 器具データ（負荷単位LU, 標準接続口径A）
FIXTURE_SPECS = {
    # 公共用
    "大便器 (洗浄弁) (公)": {"lu": 10, "size_a": 25},
    "大便器 (タンク) (公)": {"lu": 5, "size_a": 15},
    "小便器 (洗浄弁) (公)": {"lu": 5, "size_a": 15},
    "小便器 (タンク) (公)": {"lu": 3, "size_a": 15},
    "洗面器 (公)": {"lu": 2, "size_a": 15},
    "手洗器 (公)": {"lu": 0.5, "size_a": 15},
    "掃除用流し (公)": {"lu": 4, "size_a": 20},
    "厨房流し (公)": {"lu": 4, "size_a": 20},
    "シャワー (公)": {"lu": 4, "size_a": 20},
    # 個人用
    "大便器 (洗浄弁) (私)": {"lu": 6, "size_a": 25},
    "大便器 (タンク) (私)": {"lu": 3, "size_a": 15},
    "小便器 (洗浄弁) (私)": {"lu": 5, "size_a": 15},
    "小便器 (タンク) (私)": {"lu": 3, "size_a": 15},
    "洗面器 (私)": {"lu": 1, "size_a": 15},
    "手洗器 (私)": {"lu": 1, "size_a": 15},
    "台所流し (私)": {"lu": 3, "size_a": 20},
    "浴槽 (私)": {"lu": 2, "size_a": 20},
    "シャワー (私)": {"lu": 2, "size_a": 15},
    "洗濯機 (私)": {"lu": 2, "size_a": 15}
}

# 後方互換性・計算用
FIXTURE_DATA = {k: v["lu"] for k, v in FIXTURE_SPECS.items()}
DEFAULT_PUBLIC_LIST = [k.replace(" (公)", "") for k in FIXTURE_DATA.keys() if "(公)" in k]
DEFAULT_PRIVATE_LIST = [k.replace(" (私)", "") for k in FIXTURE_DATA.keys() if "(私)" in k]

# プリセット定義
PRESETS = {
    "単身住戸 (1R)": {
        "fixtures": {"大便器 (タンク) (私)": 1, "洗面器 (私)": 1, "シャワー (私)": 1, "台所流し (私)": 1, "洗濯機 (私)": 1},
        "person": 1, "dw": 1
    },
    "ファミリー (3LDK)": {
        "fixtures": {"大便器 (タンク) (私)": 1, "洗面器 (私)": 1, "浴槽 (私)": 1, "台所流し (私)": 1, "洗濯機 (私)": 1, "手洗器 (私)": 1},
        "person": 3, "dw": 1
    },
    "公共トイレ (小)": {
        "fixtures": {"大便器 (洗浄弁) (公)": 1, "小便器 (洗浄弁) (公)": 1, "洗面器 (公)": 1},
        "person": 0, "dw": 1
    },
    "公共トイレ (大)": {
        "fixtures": {"大便器 (洗浄弁) (公)": 3, "小便器 (洗浄弁) (公)": 3, "洗面器 (公)": 3, "掃除用流し (公)": 1},
        "person": 0, "dw": 1
    }
}

PIPE_DATABASES = {
    "SGP-VB (硬質塩化ビニルライニング鋼管)": [
        {"サイズ": "15A", "内径(mm)": 14.7}, {"サイズ": "20A", "内径(mm)": 20.2},
        {"サイズ": "25A", "内径(mm)": 26.2}, {"サイズ": "32A", "内径(mm)": 34.2},
        {"サイズ": "40A", "内径(mm)": 39.9}, {"サイズ": "50A", "内径(mm)": 51.0},
        {"サイズ": "65A", "内径(mm)": 65.5}, {"サイズ": "80A", "内径(mm)": 78.1},
        {"サイズ": "100A", "内径(mm)": 103.1}, {"サイズ": "125A", "内径(mm)": 127.6},
        {"サイズ": "150A", "内径(mm)": 151.0},
    ],
    "SGP (配管用炭素鋼鋼管)": [
        {"サイズ": "15A", "内径(mm)": 16.1}, {"サイズ": "20A", "内径(mm)": 21.6},
        {"サイズ": "25A", "内径(mm)": 27.6}, {"サイズ": "32A", "内径(mm)": 35.7},
        {"サイズ": "40A", "内径(mm)": 41.6}, {"サイズ": "50A", "内径(mm)": 52.9},
        {"サイズ": "65A", "内径(mm)": 67.9}, {"サイズ": "80A", "内径(mm)": 80.7},
        {"サイズ": "100A", "内径(mm)": 106.3}, {"サイズ": "125A", "内径(mm)": 130.8},
        {"サイズ": "150A", "内径(mm)": 155.2},
    ],
    "VP (硬質ポリ塩化ビニル管)": [
        {"サイズ": "13", "内径(mm)": 13.0}, {"サイズ": "16", "内径(mm)": 16.0},
        {"サイズ": "20", "内径(mm)": 20.0}, {"サイズ": "25", "内径(mm)": 25.0},
        {"サイズ": "30", "内径(mm)": 31.0}, {"サイズ": "40", "内径(mm)": 40.0},
        {"サイズ": "50", "内径(mm)": 51.0}, {"サイズ": "65", "内径(mm)": 67.0},
        {"サイズ": "75", "内径(mm)": 77.0}, {"サイズ": "100", "内径(mm)": 100.0},
        {"サイズ": "125", "内径(mm)": 125.0}, {"サイズ": "150", "内径(mm)": 146.0},
    ],
    "SU (一般配管用ステンレス鋼管)": [
        {"サイズ": "13Su", "内径(mm)": 14.28}, {"サイズ": "20Su", "内径(mm)": 20.22},
        {"サイズ": "25Su", "内径(mm)": 26.58}, {"サイズ": "30Su", "内径(mm)": 31.6},
        {"サイズ": "40Su", "内径(mm)": 40.3}, {"サイズ": "50Su", "内径(mm)": 46.2},
        {"サイズ": "60Su", "内径(mm)": 57.5}, {"サイズ": "75Su", "内径(mm)": 73.3},
        {"サイズ": "80Su", "内径(mm)": 85.1}, {"サイズ": "100Su", "内径(mm)": 110.3},
        {"サイズ": "125Su", "内径(mm)": 134.8}, {"サイズ": "150Su", "内径(mm)": 159.2},
    ],
    "PE (水道用ポリエチレン二層管1種)": [
        {"サイズ": "13", "内径(mm)": 14.5}, {"サイズ": "20", "内径(mm)": 19.0},
        {"サイズ": "25", "内径(mm)": 25.0}, {"サイズ": "30", "内径(mm)": 31.0},
        {"サイズ": "40", "内径(mm)": 36.0}, {"サイズ": "50", "内径(mm)": 46.0},
        {"サイズ": "75", "内径(mm)": 71.8}, {"サイズ": "100", "内径(mm)": 94.2},
    ]
}
PIPE_DATABASES["HIVP (耐衝撃性硬質塩化ビニル管)"] = PIPE_DATABASES["VP (硬質ポリ塩化ビニル管)"]

PIPE_COLORS = {"SGP": "#1976D2", "VP": "#757575", "HIVP": "#1565C0", "SU": "#00796B", "PE": "#388E3C"}

SU_FLOW_CAPACITY = {
    "13Su": 18.0, "20Su": 45.0, "25Su": 85.0, "30Su": 120.0,
    "40Su": 200.0, "50Su": 320.0, "60Su": 500.0, "75Su": 900.0,
    "80Su": 1100.0, "100Su": 1900.0, "125Su": 3000.0, "150Su": 4500.0
}

FLOW_TABLE_FV = { 1: 93.9, 2: 96.2, 5: 102.9, 10: 113.8, 15: 124.4, 20: 134.5, 30: 153.9, 40: 172.0, 50: 188.9, 60: 204.7, 80: 233.3, 100: 258.3, 120: 280.4, 150: 309.0, 200: 348.0, 250: 380.7, 300: 410.7, 342: 435.7 }
FLOW_TABLE_FT = { 1: 16.8, 2: 18.8, 5: 24.9, 10: 34.8, 15: 44.3, 20: 53.5, 30: 71.0, 40: 87.3, 50: 102.5, 60: 116.8, 80: 142.8, 100: 165.8, 120: 186.3, 150: 213.6, 200: 252.9, 250: 288.6, 300: 324.0, 342: 354.7 }
